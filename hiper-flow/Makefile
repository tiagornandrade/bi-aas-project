.PHONY: external-network
external-network:
	@echo "ğŸ”„ Criando rede 'external-network'..."
	@docker network create etl_network
	@echo "âœ… Rede 'external-network' criada com sucesso!"


# Subir serviÃ§os com Docker Compose
.PHONY: up
up:
	@echo "â¬†ï¸ Iniciando os serviÃ§os..."
	@docker compose up -d
	@echo "âœ… ServiÃ§os iniciados!"


,PHONY: airflow-init
airflow-init:
	@echo "ğŸ”— Criando conexÃ£o 'api-etl' no Airflow..."
	@docker compose exec airflow-webserver airflow connections add 'api-etl' \
		--conn-type 'http' \
		--conn-host 'http://127.0.0.1:8000/'
	@echo "âœ… ConexÃ£o 'api-etl' criada com sucesso!"

# Derrubar serviÃ§os com Docker Compose
.PHONY: down
down:
	@echo "â¬‡ï¸ Parando os serviÃ§os..."
	@docker compose down
	@echo "âœ… ServiÃ§os parados!"

# Reiniciar serviÃ§os com Docker Compose
.PHONY: restart
restart:
	@echo "ğŸ”„ Reiniciando os serviÃ§os..."
	@docker compose restart
	@echo "âœ… ServiÃ§os reiniciados!"

.PHONY: generate-yaml
generate-yaml:
	@echo "ğŸ”„ Gerando arquivo docker-compose.yml..."
	@python3 plugins/generate_yaml.py
	@echo "âœ… Arquivo docker-compose.yml gerado!"
